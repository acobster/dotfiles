#!/bin/bash

# EXAMPLE:
# $ reflog | tail -5
# 5 months ago 6954984 pantheon and netstat fun
# 5 months ago 5d76924 tmux aliases
# 5 months ago f844ae2 tmux config
# 5 months ago 8c75194 seed rails db, run AddRoleToUsers migration automatically with devise
# 5 months ago ba657e6 git d alias
# $

set -e

FORMAT="$1"

if [[ -z $FORMAT ]]; then
  FORMAT='%ar %h %s'
fi

git reflog | \
  awk '{print $1}' | \
  while read hash; do
    git log -1 --format="$FORMAT" $hash;
  done
